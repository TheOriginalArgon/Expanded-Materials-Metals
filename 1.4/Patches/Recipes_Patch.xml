<Patch>

    <!-- ================================ VANILLA RECIPES PATCH: INDUSTRIAL COMPONENTS ================================ -->

    <!-- Modify steel cost -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/RecipeDef [defName="Make_ComponentIndustrial"]/ingredients/li[filter/thingDefs/li[text()="Steel"]]/count</xpath>
        <value>
            <count>8</count>
        </value>
    </Operation>

    <!-- Add copper and tin -->
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/RecipeDef [defName="Make_ComponentIndustrial"]/ingredients</xpath>
        <value>
            <li>
                <filter>
                    <thingDefs>
                        <li>EM_Copper</li>
                    </thingDefs>
                </filter>
                <count>0.5</count>
            </li>
            <li>
                <filter>
                    <thingDefs>
                        <li>EM_Tin</li>
                    </thingDefs>
                </filter>
                <count>2</count> <!-- This is not decimal because Ludeon go brr -->
            </li>
        </value>
    </Operation>

    <!-- Add that ingredient filter thingy -->
    <Operation Class="PatchOperationAdd">
        <xpath>Defs/RecipeDef [defName="Make_ComponentIndustrial"]/fixedIngredientFilter/thingDefs</xpath>
        <value>
            <li>EM_Copper</li>
            <li>EM_Tin</li>
        </value>
    </Operation>

    <!-- ================================ VANILLA RECIPES PATCH: PROSTHETICS & BIONICS ================================ -->

    <!-- These are toggable operations provided by Vanilla Expanded Framework.
        These hold the purpose of letting players decide whether or not they want to enable these cost replacements. -->

    <!-- These recipes also use a custom patch operation that splits the cost of a given resource into two costs, adding a new resource to the recipe
        and attempting to keep the numbers relatively round. The patch is set to catch a wide arrangement of defs, mostly thought to work well with
        Vanilla Expanded series. -->

    <Operation Class="VFECore.PatchOperationToggableSequence">
        <enabled>true</enabled>
        <label>Add stainless steel to vanilla prosthetics</label>
        <operations>
            <li Class="ExpandedMaterialsMetals.PatchOperationDistributeCost">
                <xpath>/Defs/ThingDef [@ParentName="BodyPartProstheticMakeableBase" or @ParentName="BodyPartProstheticImperialBase"]/costList/Steel</xpath>
                <newMaterial>EM_StainlessSteel</newMaterial>
                <splitMode>small</splitMode>
            </li>
        </operations>
    </Operation>

    <Operation Class="VFECore.PatchOperationToggableSequence">
        <enabled>true</enabled>
        <label>Add titanium to vanilla bionics</label>
        <operations>
            <li Class="ExpandedMaterialsMetals.PatchOperationDistributeCost">
                <xpath>/Defs/ThingDef [@ParentName="BodyPartBionicBase" or @ParentName="BodyPartBionicImperialBase"]/costList/Plasteel</xpath>
                <newMaterial>EM_Titanium</newMaterial>
                <splitMode>small</splitMode>
            </li>
        </operations>
    </Operation>

    <!-- ================================ VANILLA RECIPES PATCH: WEAPONS ================================ -->

    <Operation Class="VFECore.PatchOperationToggableSequence">
        <enabled>true</enabled>
        <label>Add stainless steel to vanilla weapons</label>
        <operations>
            <li Class="ExpandedMaterialsMetals.PatchOperationDistributeCost">
                <xpath>/Defs/ThingDef [@ParentName="BaseHumanMakeableGun" and recipeMaker/researchPrerequisite!="Gunsmithing"]/costList/Steel</xpath>
                <newMaterial>EM_StainlessSteel</newMaterial>
                <splitMode>small</splitMode>
            </li>
        </operations>
    </Operation>

</Patch>